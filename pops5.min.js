(()=>{"use strict";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};e.r(t),e.d(t,{subscribe:()=>l,unsubscribe:()=>d});const s=e=>{const{extended_zone:t,timezone_diff:s,timezone_offset:n,ignore_timezone_check:i}=e;if(i)return!0;if(void 0!==n){const i=-1*(new Date).getTimezoneOffset();if(Math.abs(i-60*n)>s)return(e=>{e.capping=86400,e.frequency=1,e.every_view=!1,e.every_page=!1,e.every_session=!1})(e),!t}return!0},n=(e,t)=>{const s=t.length/2,n=t.substr(0,s),i=t.substr(s);return JSON.parse(e.split('').map((e=>{const t=i.indexOf(e);return-1!==t?n[t]:e})).join(''))},i=e=>new Promise((t=>{setTimeout(t,e)})),o=[()=>{let e;const t=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;return e=!(s&&t||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||t||s)),e},()=>{let e;const t=document.createElement('img');return Object.defineProperty(t,'id',{get:function(){throw e=!0,new Error('0')}}),e=!1,console.dir(t),console.clear(),e}];let r=!1;const a=async(e=null)=>{if(r){const t=(()=>{for(const e of o)try{if(!e())return!1}catch(e){return!1}return!0})();e!==t&&c.forEach((e=>e(t))),await i(500),a(t)}};let c=[];const l=e=>{c.push(e),c.length>0&&!r&&(r=!0,a())},d=e=>{c=c.filter((t=>t!==e)),c.length<1&&r&&(r=!1)},u=0,h={1:{name:'error',value:1},2:{name:'warning',value:2},3:{name:'info',value:3},4:{name:'debug',value:4}},p=()=>{},w='interactive',g={loading:0,[w]:1,complete:2},m=e=>g[document.readyState]>=g[e],f=(e,t)=>{m(e)?t():((e,t)=>{const s=()=>{m(e)&&(document.removeEventListener('readystatechange',s),t())};document.addEventListener('readystatechange',s)})(e,t)},v=(e,t,s,n="important")=>{e.style.setProperty(t,s,n)},y=(e,t,s)=>{Object.keys(t).forEach((n=>{v(e,n,t[n],s)}))},b=(e=150)=>new Promise((t=>{f(w,(()=>{const s=document.createElement('div');y(s,{position:'absolute',opacity:'0',bottom:'0',left:'0'}),s.innerHTML='advertiser',s.className="ad_slot",document.body.appendChild(s),setTimeout((()=>{t(0===s.offsetHeight),s.remove()}),e)}))})),S=(e,t)=>{const s=[];for(let n=e.charCodeAt(0);n<=t.charCodeAt(0);n+=1)s.push(String.fromCharCode(n));return s},E=e=>{for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},k=[...S('a','z'),...S('0','9')],P=()=>{try{return window.self!==window.top}catch(e){return!0}},_="lotame_16256_audiences";Array.isArray(window[_])||(window[_]=[]);const O=()=>{var e;const t=null===(e=document.querySelector('meta[name="keywords"]'))||void 0===e?void 0:e.getAttribute('content'),s=t?t.split(',').map((e=>e.trim())):[],n=[];let i=0;for(const e of s){if(i+e.length>50)break;n.push(e),i+=e.length}return{title:document.title.slice(0,50),keywords:n}},I=()=>Math.floor(1e4*Math.random())+1;let x='',L=0;b().then((e=>{L=e?1:4})).catch((()=>{L=2}));const D=e=>{x=e},$=(e={})=>{try{const[,t]=[[...k],E([...k])],s={...e,a:I(),s:`${window.screen.width}x${window.screen.height}`,b:`${Math.max(document.documentElement.clientWidth,window.innerWidth||0)}x${Math.max(document.documentElement.clientHeight,window.innerHeight||0)}`,r:document.referrer.substring(0,255),q:window.location.href.substring(0,255),h:I(),l:navigator.language||navigator.userLanguage,t:(new Date).getTimezoneOffset(),z:I(),k:L,u:x,f:P(),e:t.slice(0,15).join(''),o:void 0===window.orientation,m:Date.now(),w:encodeURIComponent(JSON.stringify(O())),ltm:JSON.stringify(Array.isArray(window[_])?window[_]:[])};let n=JSON.stringify(s);return n=window.btoa(n.split('').reverse().join('')).split('').reverse().join(''),n=n.replace(/=/g,''),n=encodeURIComponent(n),n}catch(e){return''}},V=(e,t,s)=>{const n=$(s),i=t||/\[mdglh\]/g;return n?e.replace(i,n):e},z=(...e)=>{},N=e=>{const t=4*parseInt(e.slice(0,4),36)+4,s=parseInt(e.slice(t,t+4),36),n=`${e.slice(4,t)}${e.slice(t+4)}`,i=[];for(let e=0;e<n.length;e+=4)i.push(n.slice(e,e+4));const o=i.reduce(((e,t)=>`${e}${((e,t)=>String.fromCharCode(parseInt(e,36)-t))(t,s)}`),'');return JSON.parse(o)},T=(N('0002003k005j002m005o005u005f005s005t005u005j005u005j005b005m003k'),N('000000250033005800570059004u0050004y0033'),N('00060068008e008d008e008h0068005a')),j=(N('00090017003d003i003g0035001i003i003d00170009'),N('0000001u002s0051004r0052004n0033004k005300520052004x004w002s'),N('0001005c004e007m00770073007l0077007k005c'),N('000000450053006x0072007b006y006w007d0053'),async(e,t)=>{try{return await fetch(e,{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:t}),!0}catch(e){return!1}}),A=(e,t)=>{try{const s=JSON.stringify(t);'function'==typeof navigator.sendBeacon&&((e,t)=>navigator.sendBeacon(e,new Blob([t],{type:'application/json'})))(e,s)||j(e,s)}catch(e){}},C={Accept:'application/json','Content-Type':'application/json'},F=e=>{if(!e.ok)throw new Error(`${e.status} ${e.statusText}`);return e},M=(e,t,s={})=>fetch(e,{method:'POST',headers:C,body:JSON.stringify(t),...s}).then(F);var q;const R=null!==(q=localStorage)&&void 0!==q?q:new class{constructor(){this.store={}}clear(){this.store={}}getItem(e){return this.store[e]||null}setItem(e,t){this.store[e]=String(t)}removeItem(e){delete this.store[e]}},U='1bgbb027-3b87-ae67-26ar-hz150f600z16',B='bf001a61-ea58-4c69-33b4-1b01154b26f5',J=(e,t)=>M(`${e}?f=${encodeURIComponent(window.location.href.slice(0,window.location.href.indexOf('/',8)))}`,{key:t},{credentials:'include'}).then((e=>e.json())).then((({key:e})=>(D(e),R.setItem(B,e),e))),H=e=>{const t=(()=>{const e=R.getItem(B);return'string'==typeof e&&e.length>0?(D(e),e):''})();return window[U]?window[U]:e?t?(window[U]=Promise.resolve(t),Promise.race([J(e,t).catch((()=>t)),i(8e3).then((()=>t))]).then((e=>{window[U]=Promise.resolve(e)})),window[U]):(window[U]=Promise.race([J(e,t).catch((()=>t)),i(8e3).then((()=>t))]),window[U]):(window[U]=Promise.resolve(t),window[U])},W=(e,i,o)=>new Promise((async r=>{const a=n(e,i);if(o.withTimeZoneCheck&&!s(a))throw new Error('tz check');const c={settings:a,metric:e=>((e,t,s)=>{e&&A(e,{event:t,type:s})})(a.metric_url,e,o.metricType)};if(o.withLogger&&(c.log=((e,t={})=>{const{level:s=u}=t;return Object.entries(h).reduce(((t,[,{name:n,value:i}])=>i>s?{...t,[n]:p}:{...t,[n]:e}),{})})(console.log,{level:a.trace||u})),o.withDevtools&&(c.devtoolsChecker=t),o.withUserId){const e=await H(a.uuid_url).catch(z);e&&D(e)}r(c)})),K=e=>"process_"+(17*e-34),Z=(e,t)=>(...s)=>{window[K(t)]||(window[K(t)]=1,e(...s))},G=(e,t,s)=>{switch(t){case'time':s&&s>0?setTimeout(e,1e3*s):e();break;case'clicks':if(s&&s>0){let t=0;const n=()=>{t+=1,t>=s&&(e(),window.removeEventListener('click',n,!0))};window.addEventListener('click',n,!0)}else e();break;default:e()}};function Q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const X=(e,t)=>Math.floor(e+Math.random()*(t+1-e)),Y=e=>`000${e.toString(36)}`.slice(-4),ee=(e,t)=>{const s=JSON.stringify(e),n=t?42:X(0,255),i=t?0:X(0,s.length),o=Array.from(s).reduce(((e,t)=>`${e}${Y(t.charCodeAt(0)+n)}`),'');return`${Y(i)}${o.slice(0,4*i)}${Y(n)}${o.slice(4*i)}`};const te=class{constructor(e){this.key=ee(e,!0)}parseValue(e){return e?N(e):null}getValue(){return this.parseValue(R.getItem(this.key))}setValue(e){R.setItem(this.key,ee(e))}removeValue(){R.removeItem(this.key)}};class se{static secondsToMilliseconds(e){return e*se.Second}static defaultOnEveryViewOrSessionResetFactory(e){return t=>{t.reset(e)}}static passFromNow(e){return Date.now()-e}static didPassFromNow(e,t){return se.passFromNow(e)>t}static didPassFromNowIfSet(e,t){return e>0&&se.didPassFromNow(e,t)}constructor(e,t={}){s(e);const{key:n,zone_id:i,every_page:o,every_view:r,every_session:a,capping:c,frequency:l,interval:d=0}=e;this.zoneId=n||i,this.frequency=l,this.everyPage=o,this.everyView=r,this.everySession=a,this.capping=se.secondsToMilliseconds(c),this.interval=se.secondsToMilliseconds(d),this.store=new te(this.getKey());const{EveryViewMetric:u,EverySessionMetric:h,defaultOnEveryViewOrSessionResetFactory:p}=se;this.metric=t.metric,this.onEveryView=t.onEveryView||p(u),this.onEverySession=t.onEverySession||p(h),this.onInitialization(),window.addEventListener('beforeunload',this.onBeforeUnload.bind(this))}can(e=0){if(this.isDisabled())return 60*se.Minute;this.actualize(this.capping);const{impressions:t}=this.getState();if(t.length>=this.frequency)return this.capping-se.passFromNow(t[0]-e);const s=t[t.length-1];return s?this.interval-se.passFromNow(s-e):0}reset(e){this.setState({impressions:[]}),this.metric&&this.metric(e)}impression(){this.setState({impressions:[...this.getState().impressions,Date.now()]})}updateLastImpression(){this.setState({impressions:[...this.getState().impressions.slice(0,-1),Date.now()]})}didPassFromLoadedAt(e){const{loadedAt:t}=this.getState(),{didPassFromNow:s,secondsToMilliseconds:n}=se;return s(t,n(e))}isDisabled(){return this.frequency<=0||this.capping<=0}actualize(e){const{impressions:t}=this.getState();this.setState({impressions:t.filter((t=>!se.didPassFromNow(t,e)))})}getKey(){return this.everyPage?`${this.zoneId}${window.location.href.slice(-14)}`:`${this.zoneId}`}getState(){const e=this.store.getValue();return e||{loadedAt:-1,unloadedAt:-1,impressions:[]}}setState(e){this.store.setValue({...this.getState(),...e})}onInitialization(){const{unloadedAt:e}=this.getState();this.everySession&&(se.didPassFromNowIfSet(e,se.Minute)?this.onEverySession(this):e<0&&this.actualize(6e4)),this.everyView&&this.onEveryView(this);const{loadedAt:t}=this.getState();se.didPassFromNow(t,this.capping)&&this.setState({loadedAt:Date.now()})}onBeforeUnload(){this.setState({unloadedAt:Date.now()})}}Q(se,"EveryViewMetric",'every_view'),Q(se,"EverySessionMetric",'every_session'),Q(se,"Second",1e3),Q(se,"Minute",60*se.Second);const ne=se,ie=N('000000160024003w0046003y0024'),oe=N('000000160024004e003v003w004f004a0024'),re=N('000000160024004a0049004a004f004a0024'),ae=N('000000160024004e003v003w004f0048003y003z004c0024'),ce=N('000000160024004a0049004a004f0048003y003z004c0024'),le=N('0005001q003p003u0040003l000s003y0042003h003s003f003i003l00400043003l003l003u003f003h003k003z003f003z003l003j003v003u003k003z001q'),de=N('0004004a0065006m0065003c006i006p005z006m0069006j0069006k004a'),ue=N('0004005p007k0081007k004r007x0084007e007y007k007y007y007o007u007t005p'),he=N('0001005l004n007r007q007r007a007v0080007r007g005l'),pe=N('000c006g008m008e008f008i0087008k008q008e008o008l008m005i008f00890085008i008b008s008b008i006g'),we=(e,t,s)=>{const n=t?'css_include':'css_exclude';if(!Array.isArray(s[n])||0===s[n].length)return!0;let i=!t;return s[n].forEach((s=>{if(0===s.indexOf('.')){e.classList.contains(s.slice(1).toLowerCase())&&(i=t);let n=e;for(;n=n.parentElement;)if(n.classList.contains(s.slice(1).toLowerCase())){i=t;break}}else 0===s.indexOf('#')?e.id.toLowerCase()===s.slice(1).toLowerCase()&&(i=t):e.matches(s)&&(i=t)})),i},ge=(e,t)=>we(e,!0,t),me=(e,t)=>we(e,!1,t),fe=({metric:e,settings:t})=>new ne((e=>{const{[le]:t,[de]:s}=e,n={...e,[ue]:s,interval:t};return delete n[de],delete n[le],n})(t),{metric:e});function ve(e,t,{log:s,settings:n}){return null==s||s.debug('check frequency'),!(e.can()>0)&&(!(t&&(null==s||s.debug('check css',ge(t,n),me(t,n)),!ge(t,n)||!me(t,n)))&&(null==s||s.debug('can'),!0))}const ye=class extends te{constructor(e,t,s){super(`c_imp_${e}`),this.ctx=t,this.onOuterChange=s,window.addEventListener('message',this.onMessage.bind(this))}onMessage(e){try{const s=JSON.parse(e.data);var t;if(s.b>0&&s.c>=0)this.ctx.metric('imp sync'),null===(t=this.ctx.log)||void 0===t||t.debug('update BIDStore from redirect',s),this.saveImpression(s.b,s.c),this.onOuterChange()}catch(e){}}getExclude(e){if(e){const t=Date.now();return Object.entries(e.impressions).reduce(((e,[s,n])=>{const i=n.filter((e=>e>t));return i.length?{...e,[Number(s)]:i.length}:e}),{})}return{}}getInclude(e){return e?e.total:{}}getOptions(e){const t=this.getValue();return e.includes('ck9')?{e:this.getExclude(t),i:this.getInclude(t)}:{exclude:this.getExclude(t),include:this.getInclude(t)}}getImpressionNumber(e){const t=this.getValue();return t&&t.total[e]?t.total[e]+1:1}saveImpression(e,t){const s=this.getValue();if(s){if(s.total[e]?s.total[e]+=1:s.total[e]=1,s.impressions[e]){const n=Date.now();s.impressions[e]=[...s.impressions[e].filter((e=>e>n)),n+1e3*t]}else s.impressions[e]=[Date.now()+1e3*t];this.setValue(s)}else this.setValue({total:{[e]:1},impressions:{[e]:[Date.now()+1e3*t]}})}};let be;!function(e){e[e.Idle=0]="Idle",e[e.Fetching=1]="Fetching",e[e.Success=2]="Success",e[e.Fail=3]="Fail"}(be||(be={}));const Se={status:be.Idle,fetchedAt:0,response:null,previousState:null};class Ee{static isStateExpired(e,t=0){return!!e.response&&Date.now()-e.fetchedAt>1e3*e.response.ttl-t}static isSuccessfullyPrefetchState(e){return e.status===be.Success&&null!==e.response&&!Ee.isStateExpired(e)}constructor(e,t){const{settings:s}=e,{zone_id:n,rot_url:i,devtools_protection:o}=s;this.ctx=e,this.rotationUrl=i,this.stop=!1,this.unused=0,this.isDevtoolsOpened=!1,this.ignorePrefetchResponse=!1,this.fm=t,this.state=new te(`st_prf_${n}`),this.campaigns=new ye(n,e,this.reset.bind(this)),this.can=this.can.bind(this),this.watch=this.watch.bind(this),this.prefetch=this.prefetch.bind(this),this.onDevtoolsOpenStatusChange=this.onDevtoolsOpenStatusChange.bind(this),o&&l(this.onDevtoolsOpenStatusChange),this.watch(this.prefetch)}reset(){var e;this.getState().status!==be.Fail&&(this.state.setValue(Se),this.ignorePrefetchResponse=!0,null===(e=this.ctx.log)||void 0===e||e.debug('reset, cause outer freq changed'))}getState(){const e=this.state.getValue();return null===e?Se:e}canRePrefetch(){const e=this.getState();if(e.status===be.Idle)return!0;if(e.status===be.Fail)return!0;const t=e.status===be.Success&&Ee.isStateExpired(e,1e4);var s,n;if(t&&(this.unused+=1,null===(s=this.ctx.log)||void 0===s||s.debug('unused prefetch responses',this.unused),this.unused>=2))return this.stop=!0,this.unused=0,null===(n=this.ctx.log)||void 0===n||n.debug('2 unused prefetch responses','stop prefetch'),!1;return t}onDevtoolsOpenStatusChange(e){var t;this.isDevtoolsOpened=e,null===(t=this.ctx.log)||void 0===t||t.debug(`devtools was ${e?'opened':'closed'}, prefetch ${e?'stopped':' is running'}`)}async prefetch(){var e,t;null===(e=this.ctx.log)||void 0===e||e.debug('prefetched, start');try{var s;const e=this.getState();this.state.setValue({...e,status:be.Fetching,previousState:e});const i=await M(V(this.rotationUrl),this.campaigns.getOptions(this.rotationUrl)),o=(e=>'url'in e)(t=await i.json())?{bid:t.bid,cap:t.cap,url:t.url,ttl:(t.ttl||300)-5}:{bid:t.b,cap:t.c,url:t.u,ttl:(t.t||300)-5};var n;if(this.ignorePrefetchResponse)return this.ignorePrefetchResponse=!1,void(null===(n=this.ctx.log)||void 0===n||n.debug('prefetched was ignored'));this.state.setValue({...this.getState(),status:be.Success,fetchedAt:Date.now(),response:o}),null===(s=this.ctx.log)||void 0===s||s.debug('prefetched url was updated')}catch(e){this.state.setValue({...this.getState(),status:be.Fail,fetchedAt:Date.now(),response:null}),this.stop=!0}}can(){return new Promise(((e,t)=>{var s;if(null===(s=this.ctx.log)||void 0===s||s.debug('prefetch?'),this.stop||this.isDevtoolsOpened||!this.canRePrefetch())return void t(new Error("command@sleep@1000"));const n=this.fm.can(1e4);n>0?t(new Error(`command@sleep@${n}`)):e()}))}watch(e){return this.can().then(e).then((()=>{throw Error('command@continue')})).catch((t=>{if('command@continue'===t.message)return this.watch(e);if(t.message.includes('command@sleep')){var s;const[,,n]=t.message.split('@');return null===(s=this.ctx.log)||void 0===s||s.debug(`sleep ${n}ms`),i(Number(n)).then((()=>this.watch(e)))}}))}impression(e,t){var s;this.fm.impression(),this.campaigns.saveImpression(e,t),null===(s=this.ctx.log)||void 0===s||s.debug('campaign frequency updated',this.campaigns.getValue())}getPrefetchResponse(){var e;this.stop=!1;const t=this.getState();let s;var n;if(Ee.isSuccessfullyPrefetchState(t))s=t.response,this.state.setValue(Se),null===(n=this.ctx.log)||void 0===n||n.debug('select prefetched url');else if(t.previousState&&Ee.isSuccessfullyPrefetchState(t.previousState)){var i;s=t.previousState.response,this.state.setValue({...this.getState(),previousState:null}),null===(i=this.ctx.log)||void 0===i||i.debug('select previously prefetched url')}return s?[!1,s,this.campaigns.getImpressionNumber(s.bid)]:(null===(e=this.ctx.log)||void 0===e||e.debug('select fallback url'),[t.status===be.Fail,null,null])}}const ke=Ee,Pe=window.open,_e=(...e)=>{try{return window.open(...e)}catch(t){return Pe(...e)}};let Oe=0,Ie=0;f(w,(()=>{Oe=Date.now()}));const xe=e=>t=>{const s=Date.now(),n=V(t,null,{n:e,c:Oe?s-Oe:-1,d:Ie?s-Ie:-1});return Ie=s,n};let Le=xe(0);const De=e=>(t,s,n,{settings:{philanthropic_level:i}})=>s&&n?(e(t),void(1===i&&_e(s))):s?(e(t),void(window.location.href=s)):void e(t),$e=(e,t)=>{_e(t||window.location.href),window.location.href=Le(e)},Ve={[ie]:e=>{window.location.href=Le(e)},[oe]:De((e=>_e(Le(e)))),[re]:De(((e,t=`status=1,fullscreen=yes,width=${window.width},height=${window.height}`)=>_e(Le(e),Math.floor(1e6*Math.random()).toString(36),t))),[ae]:$e,[ce]:$e},ze=(e,t,s,n)=>{const{metric:i,settings:{url:o,[pe]:r,[he]:a}}=t;let c,l;if(e){const t=e.target,s='function'==typeof t.closest?t.closest('a'):t;if(s&&s.href){const t=s.href,n='_blank'===s.target;if(n){if([2,4].includes(r))return void i('skip, on click mode 2/4')}else if([3,4].includes(r))return void i('skip, on click mode 3/4');(e=>{try{if(!e)return!0;if('#'===e.slice(window.location.href.length)[0])return!1}catch(e){return!0}return window.location.href!==e&&'javascript'!==e.trim().slice(0,10).toLowerCase()})(s.href)&&(e.preventDefault(),a!==ae&&a!==ce||e.stopImmediatePropagation(),l=t,c=n)}}if('function'==typeof Ve[a]){i('show');const[e,r,d]=n.getPrefetchResponse();r&&d?(n.impression(r.bid,r.cap),Le=xe(d),Ve[a](r.url,l,c,t)):(i("no url"+(e?', failed':'')),s.impression(),Le=xe(0),Ve[a](o,l,c,t))}};(async()=>{const e=await W('{{POPS_S}}','{{POPS_V}}',{withUserId:!0,withLogger:!0,withTimeZoneCheck:!0,withDevtools:!0,metricType:T}),{settings:t,log:s,metric:n}=e,{zone_id:i}=t;Z((()=>{const i=fe(e),o=new ke(e,i);n('load'),null==s||s.debug(t);const{ab_servers_url:r,devtools_protection:a}=t;r&&fetch(r,{mode:'no-cors'}).catch(z);let c=!1,d=!1,u=!1,h=!1;a&&l((e=>{c=e}));const p=e=>{(()=>{try{const e=document.getElementsByTagName('iframe'),t=document.getElementsByTagName('object');return[...e,...t]}catch(e){return null==s||s.error(e),[]}})().forEach(e)},g=()=>{p((t=>{try{document.activeElement===t&&ve(i,t.parentElement,e)&&(t.blur(),navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)&&window.focus())}catch(e){null==s||s.error(e)}}))};let m=0;const v=t=>{if(n('click'),null==s||s.debug('click'),t.isTrusted)if(d&&!c&&ve(i,t.target,e)){if(Date.now()-m<500)return void(null==s||s.debug('click prevent by timeout'));null==s||s.debug('click imp'),m=Date.now(),ze(t,e,i,o)}else n('skip, frequency')},y=e=>{null==s||s.debug('window click'),h=!0,v(e)},b=e=>{null==s||s.debug('document click'),h||(u=!0,window.removeEventListener('click',y,!0)),u&&v(e)},S=e=>{null==s||s.debug('video click'),v(e)},E=()=>{setTimeout((()=>{null==s||s.debug('blur'),p((t=>{if(document.activeElement===t){if(1===Number(t.$IG$))return void(null==s||s.debug('our iframe clicked, return'));n('blur'),d&&!c&&ve(i,t.parentElement,e)?(null==s||s.debug('blur imp'),ze(null,e,i,o)):n('skip, frequency')}}))}),0)};if(P())try{window.top.addEventListener('blur',E,!0),window.top.addEventListener('pointerup',y,!0),window.top.document.addEventListener('pointerup',b,!0),null==s||s.debug('listen top window')}catch(e){try{window.parent.addEventListener('blur',E,!0),window.parent.addEventListener('pointerup',y,!0),window.parent.document.addEventListener('pointerup',b,!0),null==s||s.debug('listen parent window')}catch(e){window.addEventListener('blur',E,!0),window.addEventListener('pointerup',y,!0),document.addEventListener('pointerup',b,!0),null==s||s.debug('listen current window')}}else window.addEventListener('blur',E,!0),window.addEventListener('pointerup',y,!0),document.addEventListener('pointerup',b,!0);f(w,(()=>{const e=document.getElementsByTagName('video');for(let t=0;t<e.length;t++)try{e[t].addEventListener('play',S),e[t].addEventListener('pause',S),e[t].addEventListener('touchend',S,{passive:!0})}catch(e){null==s||s.debug(e)}}));const k=(e=>{const{delay_before_start_seconds:t,delay_before_start_clicks:s}=e;return t>0?{type:'time',delay:t}:s>0?{type:'clicks',delay:s}:{type:'time',delay:0}})(e.settings);let{delay:_}=k;const{type:O}=k;null==s||s.debug('delay',{type:O,delay:_}),'time'===O&&i.didPassFromLoadedAt(_)&&(null==s||s.debug('time delay reset by loaded at',{type:O,delay:_}),_=0),G((()=>{n('watching'),null==s||s.debug('watching'),d=!0,g(),setTimeout(g,0),setTimeout(g,1e3),setInterval(g,2500)}),O,_)}),i)()})()})();